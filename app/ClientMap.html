<!DOCTYPE html>
<html>
<head>
<!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/simple-sidebar.css" rel="stylesheet">
  <style>
    #map {
      height: 400px;
      width: 100%;
    }
  </style>
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
</head>
<body>
<div class="container">
	<h3>Dla klienta...</h3>
	<div class="row">
		<div class="col-md-4">
			<form id="form1">
			  Imie:<br>
			  <input type="text" id="Imie"><br>
			  Nazwisko:<br>
			  <input type="text" id="Nazwisko"><br>
			  Email:<br>
			  <input type="text" id="Email"><br>
			  Telefon:<br>
			  <input type="text" id="Telefon"><br>
			  Uwagi:<br>
			  <input type="text" id="Uwagi" id="asd" placeholder="First Name:"><br>
			</form> 
			<button value="Submit" onclick="doIt()">Submit</button>
		</div>
		<div class="col-md-8">
			<div id="map"></div>
		</div>
	</div>
</div>

<script>
 var map;
  var myLocationMarker = undefined;
  var communicationNodes = [{lat: 52.2, lng: 21.1}, {lat: 52.15, lng: 21.2}];

  var iconPathBase = "img/";
  var icons = {
      radiotower: {
        icon: iconPathBase + 'radiotower.png'}
    };

function doIt() {
	var name = document.getElementById("Imie").value;	
	var surname = document.getElementById("Nazwisko").value;
	var email = document.getElementById("Email").value;
	var phone = document.getElementById("Telefon").value;
	var observations = document.getElementById("Uwagi").value;
	var lat = myLocationMarker.getPosition().lat();
	var lng = myLocationMarker.getPosition().lng();
	
	alert(name + "\n" + 
	surname + "\n" + 
	email + "\n" + 
	phone + "\n" + 
	observations + "\n" + 
	lat + "\n" + 
	lng);
	
}

  function getInitialCoords() {
    return {lat: 52.14, lng: 21.1};
  }

  function initMap() {
    map = new google.maps.Map(document.getElementById('map'), {
      zoom: 6,
      center: getInitialCoords()
    });
	for (var i = 0; i < communicationNodes.length; i++){
		setMarker(communicationNodes[i], icons.radiotower.icon);
	}
    setupListeners();
    setMyLocation(getInitialCoords());
  }

  function setMarker(coords, icon){
    marker = new google.maps.Marker({
      position: coords,
      map: map,
      icon: icon
    });

    return marker;
  }

  function setMyLocation(coords){
    if (myLocationMarker !== undefined){
        myLocationMarker.setMap(null);
    }

    myLocationMarker = setMarker(coords);
    
    updateView(coords);
  }



  function setupListeners(){
    //MapMouseClick
    map.addListener('click', function(event) {
      setMyLocation(event.latLng);
    });

    //SubmitLocationClicked
    $("#localization-button").click(function(){
        var coords = {lat: parseFloat($("#latLoc").val()), lng: parseFloat($("#lenLoc").val())};
        setMyLocation(coords);
    });
  } 

	google.maps.event.addListener(map, 'click', function(event) {
	  	placeMarker(event.latLng);
	});
	
	function placeMarker(location) {
	    myLocationMarker = new google.maps.Marker({
	        position: location, 
	        map: map
	    });
	}

</script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBwbsD_1fcone450PTkpMAy_u40_CVcGms&callback=initMap">
</script>
</body>
</html>
